<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Peace Of Mind</title>

  <!-- Melodrama via Fontshare CDN -->
  <link rel="preconnect" href="https://api.fontshare.com" crossorigin>
  <link href="https://api.fontshare.com/v2/css?f[]=melodrama@400,500,700&display=swap" rel="stylesheet">

  <!-- DM Mono for UI labels -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/src/style.css">
  <script src="/src/script.js" type="module" defer></script>
</head>
<body>

  <!-- ‚ïê‚ïê‚ïê SVG Liquid Glass Distortion Filter (snipzy.dev method) ‚ïê‚ïê‚ïê -->
  <svg style="display:none" aria-hidden="true">
    <defs>
      <filter id="glass-distortion" x="-20%" y="-20%" width="140%" height="140%" color-interpolation-filters="sRGB">
        <feTurbulence type="turbulence" baseFrequency="0.008" numOctaves="2" seed="3" result="noise"/>
        <feDisplacementMap id="glassDispMap" in="SourceGraphic" in2="noise" scale="70" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>

  <canvas id="rain"></canvas>


  <!-- Theme switcher -->
  <div class="theme-panel" role="group" aria-label="Theme">
    <button class="theme-btn" data-theme-set="dark"   title="Dark">
      <img src="/public/darkM.png" alt="Dark mode">
    </button>
    <button class="theme-btn" data-theme-set="light"  title="Light">
      <img src="/public/lightM.png" alt="Light mode">
    </button>
    <button class="theme-btn" data-theme-set="system" title="System">
      <img src="/public/systemM.png" alt="System mode">
    </button>
  </div>

  <main>

    <!-- ‚îÄ‚îÄ ROW 1 C1-2 : Calendar ‚îÄ‚îÄ -->
    <section class="card card-calendar" aria-label="Calendar">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content">
        <div class="cal-header">
          <span class="label">Calendar</span>
          <span id="calMonthYear" class="cal-month-year"></span>
        </div>
        <div class="cal-date-display">
          <time class="date">
            <span class="month"></span> <span class="dayOfMonth"></span>,
            <span class="year"></span> ‚Äî <span class="dayOfWeek"></span>
          </time>
        </div>
        <div class="cal-grid" id="calGrid"></div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ ROW 1 C3-4 : Library ‚îÄ‚îÄ -->
    <section class="card card-library" aria-label="Library" id="openLibrary">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content">
        <span class="label">Currently Reading</span>
        <div class="library-inner">
          <div class="lib-icon">üìö</div>
          <div class="library-info">
            <p class="book-title">The Night Circus</p>
            <div class="progress-bar"><div class="progress-fill"></div></div>
            <span class="progress-label">60% complete</span>
          </div>
        </div>
        <div class="mini-shelf">
          <div class="spine" style="background:#d96c6c"></div>
          <div class="spine" style="background:#6cd9a5"></div>
          <div class="spine" style="background:#6c8cff"></div>
          <div class="spine" style="background:#d9c56c"></div>
          <div class="spine" style="background:#c46cd9"></div>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ ROW 1-2 C5-6 : Anniversary (spans 2 rows, 2 cols) ‚îÄ‚îÄ -->
    <section class="card card-anniv" aria-label="Anniversary" id="annivCard">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content anniv-content">
        <div class="anniv-header-row">
          <span class="label" style="margin-bottom:0">Anniversary üíï</span>
          <div class="anniv-actions">
            <button class="anniv-action-btn" id="annivAddBtn" title="Add photos">Ôºã Add</button>
            <button class="anniv-action-btn anniv-action-danger" id="annivRemoveBtn" title="Remove current photo">‚úï Remove</button>
          </div>
        </div>
        <div class="anniv-slide-wrap" id="annivSlideWrap">
          <div class="anniv-placeholder" id="annivPlaceholder">
            <span style="font-size:2.5rem">üíï</span>
            <span class="anniv-hint">Click + Add to upload photos</span>
          </div>
          <img class="anniv-img hidden" id="annivImg" alt="Anniversary photo"/>
          <button class="anniv-nav anniv-prev" id="annivPrev" aria-label="Previous">‚Äπ</button>
          <button class="anniv-nav anniv-next" id="annivNext" aria-label="Next">‚Ä∫</button>
          <div class="anniv-counter" id="annivCounter"></div>
        </div>
        <div class="anniv-dots" id="annivDots"></div>
        <div class="anniv-footer">
          <span class="anniv-years" id="annivYears">‚Äî</span>
          <span class="anniv-unit">years together</span>
          <span class="anniv-date">April 20, 2022 üíï</span>
        </div>
      </div>
      <input type="file" id="annivUpload" accept="image/*" multiple style="display:none">
    </section>

    <!-- ‚îÄ‚îÄ ROW 2 C1 : Time (big) ‚îÄ‚îÄ -->
    <div class="card card-sq card-time-sq" aria-label="Time">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content sq-content">
        <span class="label">Time</span>
        <time class="time time-sq">
          <span class="hours">00</span><span class="time-colon">:</span><span class="minutes">00</span><span class="amOrPm">AM</span>
        </time>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ ROW 2 C2-4 : Gym + Graduation combined ‚îÄ‚îÄ -->
    <div class="card card-gym-grad" aria-label="Gym &amp; Graduation" id="gymCard">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content gym-grad-content">
        <div class="gym-section">
          <span class="label">Gym Log</span>
          <div class="gym-week" id="gymWeek"></div>
          <button class="gym-btn" id="gymLogBtn">I went today! üí™</button>
        </div>
        <div class="gym-grad-divider"></div>
        <div class="grad-section">
          <span class="label">Graduation</span>
          <time class="daysUntilEvent stat-num">‚Äî</time>
          <span class="stat-unit">days left</span>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ ROW 3 C1-2 : Music ‚îÄ‚îÄ -->
    <section class="card card-music" aria-label="Music Player">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content">
        <span class="label">Now Playing</span>
        <div class="music-inner">
          <div class="music-art" id="musicArt">‚ô™</div>
          <div class="music-info">
            <p class="music-track" id="musicTrack">No track loaded</p>
            <p class="music-artist" id="musicArtist">‚Äî</p>
            <div class="music-bar" id="musicProgressBar"><div class="music-bar-fill" id="musicFill"></div></div>
            <span class="music-time" id="musicTimeDisplay">0:00 / 0:00</span>
          </div>
        </div>
        <div class="music-controls">
          <button class="music-btn" id="musicPrev">‚èÆ</button>
          <button class="music-btn music-play" id="musicPlay">‚ñ∂</button>
          <button class="music-btn" id="musicNext">‚è≠</button>
          <input class="music-vol" id="musicVolume" type="range" min="0" max="1" step="0.05" value="0.8">
          <label class="music-upload">Ôºã<input type="file" id="musicUpload" accept="audio/*" multiple style="display:none"></label>
        </div>
        <audio id="audioPlayer"></audio>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ ROW 3 C3-4 : Moon ‚îÄ‚îÄ -->
    <section class="card card-moon" aria-label="Moon Phase">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content">
        <span class="label">Moon Phase</span>
        <div class="moon-inner">
          <canvas id="moonCanvas" width="72" height="72" class="moon-canvas"></canvas>
          <div class="moon-info">
            <p class="moon-name" id="moonName">‚Äî</p>
            <p class="moon-detail" id="moonDetail">‚Äî</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ ROW 3 C5-6 : Fox (2 cols wide) ‚îÄ‚îÄ -->
    <div class="card card-fox" id="foxCard" aria-label="Daily Fox">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content fox-content">
        <span class="label">Daily Fox ‚Äî click for a new one! ü¶ä</span>
        <div class="fox-wrap" id="foxImgWrap"><span class="fox-emoji">ü¶ä</span></div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ ROW 3 C4 : Water ‚îÄ‚îÄ -->
    <div class="card card-water" aria-label="Hydration" id="waterCard">
      <div class="glass-filter"></div>
      <div class="glass-overlay"></div>
      <div class="glass-specular"></div>
      <div class="card-content water-content">
        <span class="label">Hydration</span>
        <div class="water-body">
          <div class="water-glass-wrap">
            <div class="water-glass">
              <div class="water-fill" id="waterFill"><div class="water-wave"></div></div>
              <div class="water-drip" id="waterDrip"></div>
              <div class="water-shine"></div>
            </div>
          </div>
          <div class="water-info-row">
            <div class="water-oz-display">
              <span class="water-oz" id="waterOzDisplay">0</span>
              <span class="water-oz-label">/ <span id="waterGoalDisplay">64</span> oz</span>
            </div>
            <div class="water-mini-bar"><div class="water-mini-fill" id="waterMiniFill"></div></div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  <!-- Library -->
  <div class="modal-overlay" id="libraryModal">
    <div class="modal-glass">
      <button class="modal-x" id="libraryClose">‚úï</button>
      <h2 class="modal-title">My Bookshelf</h2>
      <div class="book-grid">
        <div class="book-card" data-book="night-circus">The Night Circus</div>
        <div class="book-card" data-book="atomic-habits">Atomic Habits</div>
        <div class="book-card" data-book="dune">Dune</div>
        <div class="book-card" data-book="hobbit">The Hobbit</div>
        <div class="book-card" data-book="silent-patient">The Silent Patient</div>
        <div class="book-card" data-book="midnight-library">The Midnight Library</div>
        <div class="book-card" data-book="gone-girl">Gone Girl</div>
        <div class="book-card" data-book="martian">The Martian</div>
      </div>
    </div>
  </div>

  <!-- Book Detail -->
  <div class="modal-overlay" id="bookDetailModal" style="z-index:201">
    <div class="modal-glass">
      <button class="modal-x" id="bookDetailClose">‚úï</button>
      <div class="bk-header">
        <div class="bk-cover" id="bookCover">üìñ</div>
        <div class="bk-meta">
          <div class="bk-title" id="bookDetailTitle"></div>
          <div class="bk-author" id="bookDetailAuthor"></div>
          <div class="star-row">
            <span class="star" data-star="1" tabindex="0">‚òÖ</span>
            <span class="star" data-star="2" tabindex="0">‚òÖ</span>
            <span class="star" data-star="3" tabindex="0">‚òÖ</span>
            <span class="star" data-star="4" tabindex="0">‚òÖ</span>
            <span class="star" data-star="5" tabindex="0">‚òÖ</span>
          </div>
          <div class="link-row">
            <input class="mi" id="bookLinkInput" type="url" placeholder="Goodreads / Amazon link‚Ä¶"/>
            <button class="mb" id="bookLinkOpen">Open ‚Üó</button>
          </div>
        </div>
      </div>
      <div class="bk-summary">
        <span class="sec-label">Summary</span>
        <span id="bookSummaryText"></span>
      </div>
    </div>
  </div>

  <!-- Calendar Notes -->
  <div class="modal-overlay" id="calModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="calModalClose">‚úï</button>
      <div class="modal-title" id="calModalDate"></div>
      <span class="sec-label">Notes &amp; Reminders</span>
      <textarea class="mta" id="calNotesInput" placeholder="Add a note for this day‚Ä¶" rows="4"></textarea>
      <div id="calRemindersList"></div>
      <div class="row-gap">
        <input class="mi" id="calReminderInput" type="text" placeholder="Quick reminder‚Ä¶"/>
        <button class="mb" id="calAddReminder">Add</button>
      </div>
    </div>
  </div>

  <!-- Water Log -->
  <div class="modal-overlay" id="waterModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="waterModalClose">‚úï</button>
      <div class="modal-title">üíß Hydration Log</div>
      <div class="water-log-today">
        <span class="sec-label">Today's intake</span>
        <span class="water-big" id="wToday">0</span>
        <span class="water-big-unit">/ <span id="wGoal">64</span> oz</span>
      </div>
      <div class="row-gap" style="margin-bottom:10px">
        <input class="mi" id="waterOzInput" type="number" min="1" max="200" placeholder="oz just drank‚Ä¶"/>
        <button class="mb" id="waterLogBtn">+ Log</button>
      </div>
      <div class="row-gap" style="margin-bottom:14px">
        <span class="sec-label" style="margin:0;white-space:nowrap">Daily goal (oz)</span>
        <input class="mi" id="waterGoalInput" type="number" min="16" max="300" placeholder="64" style="max-width:80px"/>
        <button class="mb" id="waterGoalSave">Save</button>
      </div>
      <span class="sec-label">History</span>
      <div class="water-hist" id="waterHistory"></div>
    </div>
  </div>

  <!-- Gym Log -->
  <div class="modal-overlay" id="gymModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="gymModalClose">‚úï</button>
      <div class="modal-title">üèãÔ∏è Gym Log</div>
      <div class="gym-week-full" id="gymWeekFull"></div>
      <span class="sec-label" style="margin-top:14px;display:block">Past Weeks</span>
      <div class="gym-hist" id="gymHistory"></div>
    </div>
  </div>

</body>
</html>
