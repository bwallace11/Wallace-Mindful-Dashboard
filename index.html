<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Peace Of Mind</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css">
  <script src="/src/script.js" type="module" defer></script>
</head>
<body>
  <canvas id="glassCanvas"></canvas>
  <canvas id="rain"></canvas>

  <!-- Theme -->
  <div class="theme-panel" role="group" aria-label="Theme">
    <button class="theme-btn" data-theme-set="dark"   title="Dark">ğŸŒ™</button>
    <button class="theme-btn" data-theme-set="light"  title="Light">â˜€ï¸</button>
    <button class="theme-btn" data-theme-set="system" title="System">âš™ï¸</button>
  </div>

  <main>
    <!-- R1 C1-2: Calendar -->
    <section class="card card-calendar" aria-label="Calendar">
      <div class="cal-header">
        <span class="label">Calendar</span>
        <span id="calMonthYear" class="cal-month-year"></span>
      </div>
      <div class="cal-date-display">
        <time class="date"><span class="month"></span> <span class="dayOfMonth"></span>, <span class="year"></span> â€” <span class="dayOfWeek"></span></time>
      </div>
      <div class="cal-grid" id="calGrid"></div>
    </section>

    <!-- R1 C3-4: Library -->
    <section class="card card-library" aria-label="Library" id="openLibrary">
      <span class="label">Currently Reading</span>
      <div class="library-inner">
        <div class="lib-icon">ğŸ“š</div>
        <div class="library-info">
          <p class="book-title">The Night Circus</p>
          <div class="progress-bar"><div class="progress-fill"></div></div>
          <span class="progress-label">60% complete</span>
        </div>
      </div>
      <div class="mini-shelf">
        <div class="spine" style="background:#d96c6c"></div>
        <div class="spine" style="background:#6cd9a5"></div>
        <div class="spine" style="background:#6c8cff"></div>
        <div class="spine" style="background:#d9c56c"></div>
        <div class="spine" style="background:#c46cd9"></div>
      </div>
    </section>

    <!-- R1-2 C5: Anniversary spans 2 rows -->
    <section class="card card-anniv" aria-label="Anniversary" id="annivCard">
      <span class="label">Anniversary</span>
      <div class="anniv-slide-wrap" id="annivSlideWrap">
        <div class="anniv-placeholder" id="annivPlaceholder">
          <span style="font-size:2rem">ğŸ’•</span>
          <span class="anniv-hint">Tap to add photos</span>
        </div>
        <img class="anniv-img hidden" id="annivImg" alt="Anniversary photo"/>
        <button class="anniv-nav anniv-prev" id="annivPrev" aria-label="Prev">â€¹</button>
        <button class="anniv-nav anniv-next" id="annivNext" aria-label="Next">â€º</button>
      </div>
      <div class="anniv-dots" id="annivDots"></div>
      <div class="anniv-footer">
        <span class="anniv-years" id="annivYears">â€”</span>
        <span class="anniv-unit">years together</span>
        <span class="anniv-date">April 20, 2022 ğŸ’•</span>
      </div>
      <input type="file" id="annivUpload" accept="image/*" multiple style="display:none">
    </section>

    <!-- R2 C1: Gym Log -->
    <div class="card card-sq card-gym" aria-label="Gym Log" id="gymCard">
      <span class="label">Gym</span>
      <div class="gym-week" id="gymWeek"></div>
      <button class="gym-btn" id="gymLogBtn">I went!</button>
    </div>

    <!-- R2 C2: Time (was Journaled) -->
    <div class="card card-sq card-time-sq" aria-label="Time">
      <span class="label">Time</span>
      <time class="time time-sq">
        <span class="hours">00</span>:<span class="minutes">00</span>:<span class="seconds">00</span><span class="amOrPm">AM</span>
      </time>
    </div>

    <!-- R2 C3: Graduation -->
    <div class="card card-sq card-grad-sq" aria-label="Graduation">
      <span class="label">Graduation</span>
      <time class="daysUntilEvent stat-num">â€”</time>
      <span class="stat-unit">days</span>
    </div>

    <!-- R2 C4: Water Widget -->
    <div class="card card-water" aria-label="Hydration" id="waterCard">
      <span class="label">Hydration</span>
      <div class="water-body">
        <div class="water-glass-wrap">
          <div class="water-glass">
            <div class="water-fill" id="waterFill">
              <div class="water-wave"></div>
            </div>
            <div class="water-drip" id="waterDrip"></div>
            <div class="water-shine"></div>
          </div>
        </div>
        <div class="water-info-row">
          <div class="water-oz-display">
            <span class="water-oz" id="waterOzDisplay">0</span>
            <span class="water-oz-label">/ <span id="waterGoalDisplay">64</span> oz</span>
          </div>
          <div class="water-mini-bar">
            <div class="water-mini-fill" id="waterMiniFill"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- C5 occupied by anniv rowspan -->

    <!-- R3 C1-2: Music -->
    <section class="card card-music" aria-label="Music Player">
      <span class="label">Now Playing</span>
      <div class="music-inner">
        <div class="music-art" id="musicArt">â™ª</div>
        <div class="music-info">
          <p class="music-track" id="musicTrack">No track loaded</p>
          <p class="music-artist" id="musicArtist">â€”</p>
          <div class="music-bar" id="musicProgressBar"><div class="music-bar-fill" id="musicFill"></div></div>
          <span class="music-time" id="musicTimeDisplay">0:00 / 0:00</span>
        </div>
      </div>
      <div class="music-controls">
        <button class="music-btn" id="musicPrev">â®</button>
        <button class="music-btn music-play" id="musicPlay">â–¶</button>
        <button class="music-btn" id="musicNext">â­</button>
        <input class="music-vol" id="musicVolume" type="range" min="0" max="1" step="0.05" value="0.8">
        <label class="music-upload">ï¼‹<input type="file" id="musicUpload" accept="audio/*" multiple style="display:none"></label>
      </div>
      <audio id="audioPlayer"></audio>
    </section>

    <!-- R3 C3-4: Moon -->
    <section class="card card-moon" aria-label="Moon Phase">
      <span class="label">Moon Phase</span>
      <div class="moon-inner">
        <canvas id="moonCanvas" width="72" height="72" class="moon-canvas"></canvas>
        <div class="moon-info">
          <p class="moon-name" id="moonName">â€”</p>
          <p class="moon-detail" id="moonDetail">â€”</p>
        </div>
      </div>
    </section>

    <!-- R3 C5: Fox -->
    <div class="card card-sq card-fox" id="foxCard" aria-label="Daily Fox">
      <span class="label">Daily Fox</span>
      <div class="fox-wrap" id="foxImgWrap"><span class="fox-emoji">ğŸ¦Š</span></div>
    </div>
  </main>

  <!-- â•â• MODALS â•â• -->

  <!-- Library -->
  <div class="modal-overlay" id="libraryModal">
    <div class="modal-glass">
      <button class="modal-x" id="libraryClose">âœ•</button>
      <h2 class="modal-title">My Bookshelf</h2>
      <div class="book-grid" id="bookGrid">
        <div class="book-card" data-book="night-circus">The Night Circus</div>
        <div class="book-card" data-book="atomic-habits">Atomic Habits</div>
        <div class="book-card" data-book="dune">Dune</div>
        <div class="book-card" data-book="hobbit">The Hobbit</div>
        <div class="book-card" data-book="silent-patient">The Silent Patient</div>
        <div class="book-card" data-book="midnight-library">The Midnight Library</div>
        <div class="book-card" data-book="gone-girl">Gone Girl</div>
        <div class="book-card" data-book="martian">The Martian</div>
      </div>
    </div>
  </div>

  <!-- Book Detail -->
  <div class="modal-overlay" id="bookDetailModal" style="z-index:201">
    <div class="modal-glass">
      <button class="modal-x" id="bookDetailClose">âœ•</button>
      <div class="bk-header">
        <div class="bk-cover" id="bookCover">ğŸ“–</div>
        <div class="bk-meta">
          <div class="bk-title" id="bookDetailTitle"></div>
          <div class="bk-author" id="bookDetailAuthor"></div>
          <div class="star-row" id="starRating">
            <span class="star" data-star="1" tabindex="0">â˜…</span>
            <span class="star" data-star="2" tabindex="0">â˜…</span>
            <span class="star" data-star="3" tabindex="0">â˜…</span>
            <span class="star" data-star="4" tabindex="0">â˜…</span>
            <span class="star" data-star="5" tabindex="0">â˜…</span>
          </div>
          <div class="link-row">
            <input class="mi" id="bookLinkInput" type="url" placeholder="Goodreads / Amazon linkâ€¦"/>
            <button class="mb" id="bookLinkOpen">Open â†—</button>
          </div>
        </div>
      </div>
      <div class="bk-summary">
        <span class="sec-label">Summary</span>
        <span id="bookSummaryText"></span>
      </div>
    </div>
  </div>

  <!-- Calendar Notes -->
  <div class="modal-overlay" id="calModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="calModalClose">âœ•</button>
      <div class="modal-title" id="calModalDate"></div>
      <span class="sec-label">Notes & Reminders</span>
      <textarea class="mta" id="calNotesInput" placeholder="Add a note for this dayâ€¦" rows="4"></textarea>
      <div id="calRemindersList"></div>
      <div class="row-gap">
        <input class="mi" id="calReminderInput" type="text" placeholder="Quick reminder (e.g. Doctor 3pm)â€¦"/>
        <button class="mb" id="calAddReminder">Add</button>
      </div>
    </div>
  </div>

  <!-- Water Log -->
  <div class="modal-overlay" id="waterModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="waterModalClose">âœ•</button>
      <div class="modal-title">ğŸ’§ Hydration Log</div>
      <div class="water-log-today">
        <span class="sec-label">Today's intake</span>
        <span class="water-big" id="wToday">0</span>
        <span class="water-big-unit">/ <span id="wGoal">64</span> oz</span>
      </div>
      <div class="row-gap" style="margin-bottom:10px">
        <input class="mi" id="waterOzInput" type="number" min="1" max="200" placeholder="oz just drankâ€¦"/>
        <button class="mb" id="waterLogBtn">+ Log</button>
      </div>
      <div class="row-gap" style="margin-bottom:14px">
        <span class="sec-label" style="margin:0;white-space:nowrap">Daily goal (oz)</span>
        <input class="mi" id="waterGoalInput" type="number" min="16" max="300" placeholder="64" style="max-width:80px"/>
        <button class="mb" id="waterGoalSave">Save</button>
      </div>
      <span class="sec-label">History</span>
      <div class="water-hist" id="waterHistory"></div>
    </div>
  </div>


  <!-- Gym Log Modal -->
  <div class="modal-overlay" id="gymModal" style="z-index:150">
    <div class="modal-glass modal-sm">
      <button class="modal-x" id="gymModalClose">âœ•</button>
      <div class="modal-title">ğŸ‹ï¸ Gym Log</div>
      <div class="gym-week-full" id="gymWeekFull"></div>
      <div class="gym-history-section">
        <span class="sec-label" style="margin-top:14px;display:block">Past Weeks</span>
        <div class="gym-hist" id="gymHistory"></div>
      </div>
    </div>
  </div>

</body>
</html>
